"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDB=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_mongodb=_interopRequireDefault(require("mongodb")),_config=require("../config"),db=null,getDB=function(){var a=(0,_asyncToGenerator2.default)(function*(){if(!db){var a=new _mongodb.default.MongoClient(_config.mongoUrl,{useNewUrlParser:!0,useUnifiedTopology:!0,keepAlive:1});yield a.connect().catch(a=>{console.log(a),process.exit(-1)}),db=a.db(_config.dbName)}return db});return function(){return a.apply(this,arguments)}}();exports.getDB=getDB;